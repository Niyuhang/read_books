# 何时去重构

1.重复代码的出现
  
(1). 同一个类中两个函数出现重复， 抽离代码，在构造一个函数执行重复代码
(2). 兄弟类的函数有重复的代码，抽离重复代码，在超类中构造新函数
(3). 两个不相关的类有重复，可以构造一个第三方类，或者另一个类可以去调用这个方法，保证方法确定位置后只出现在一个地方
  

2.过长的函数

原则： 当你觉得需要注释来进行说明时，就可以将需要说明的写进一个函数中，并且命名一定要好，说出做什么，如何做。

常见需要提炼的 

(1)出现需要注释来解释的地方

(2)有太多临时变量和参数的时候

(3)条件表达式和循环

3.过大的类

4.当一个函数需要的参数过多时

可以将函数定义在类当中，从类当中去获取参数，

5.发散式变化

当一个类因为某个原因而需要较多变化时，可以将类分成几个部分，让每个类只会因为一种变化而修改

6.霰弹式变化

当一个变化会引起多个类的改动时，可以讲这些类中受到影响的部分集中在一个类中。

7.依恋情结

判断好一个函数到底应该归属在哪个类中，可以判读这个函数对哪个类中的数据拥有最多，让函数跟着数据走。

也可以现对一个函数进行提炼，抽离后再将各个函数归属于不同地方。


8.数据泥团

当一些数据经常扎堆出现在一起时，可以考虑将这些数据整理到一个数据类中，并且可以通过移除一个数据，看其他数据还能不能存在，
如果不再存在，就可以将这些重新构建了。


9.基本类型偏执

使用类来进行修改一个基本结构

10.条件逻辑

将需要条件判断的地方利用多态来进行修改

11.平行继承体系

当新增一个子类时，需要平行的为另一个类新增子类时，就可以考虑其中一个类引用另外一个类

12.冗余类

如果一个类并没有起到相应的作用，就应该去掉了

13.考虑现实情况

如果因为过度的考虑未来会遇到的情况，而利用各种钩子或者特殊情况来处理，就会造成代码的难以维护。

14.临时字段

类当中的实例变量应该尽量时所有时候都需要的，而不是为了一个特殊情况而设置的

15.过度耦合的消息链

当一个客户端需要先请求一个对象，再去请求下一个对象，产生一个消息链时，可以为将对象隐藏，加入代理，
或者将最后需要的对象执行的方法，可以将这个操作抽离成一个函数，然后注入到消息链。

16.中间人

我们我们可以利用一个中间人来对一个类的方法进行代理，让对象和对象之间的交互变成对象和中间人之间

17.减少两个类之间的过分依赖关系，可以将它们的共同方法抽离到一个新类中

18.当服务类不完整时，可以将服务类作为参数传入一个函数，然后进行类方法的修改

19.纯稚的数据类

当一个类只包含一些数据和数据的读写操作时，就是一个数据类。而当其他地方有需要使用这些数据的时候，就应该
适当的将那个代码迁移到这个数据类中。

20.子类拒绝父类的方法

21.过多的注释

减少过长的注释，出现过长的注释说明原本的结构应该改变了



 
